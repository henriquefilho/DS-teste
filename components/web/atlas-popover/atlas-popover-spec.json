{
  "component": "atlas-popover",
  "type": "web-component",
  "description": "Container flutuante que exibe informa√ß√µes e a√ß√µes contextuais. Acionado quando o usu√°rio clica/toca em um elemento e aparece ancorado a este elemento.",
  "version": "1.0.0",
  "properties": [
    {
      "name": "arrow",
      "type": "enum",
      "values": [
        "top-center",
        "top-left",
        "top-right",
        "bottom-center",
        "bottom-left",
        "bottom-right",
        "side-left",
        "side-right",
        "none"
      ],
      "default": "top-center",
      "required": false,
      "description": "Posi√ß√£o da seta indicadora que aponta para o elemento acionador"
    },
    {
      "name": "title",
      "type": "string",
      "default": "",
      "required": false,
      "description": "T√≠tulo do popover (opcional)"
    },
    {
      "name": "text",
      "type": "string",
      "default": "",
      "required": true,
      "description": "Texto do corpo do popover"
    },
    {
      "name": "image-src",
      "type": "string",
      "default": "",
      "required": false,
      "description": "URL da imagem opcional a ser exibida no topo"
    },
    {
      "name": "image-alt",
      "type": "string",
      "default": "",
      "required": false,
      "description": "Texto alternativo da imagem"
    },
    {
      "name": "action-type",
      "type": "enum",
      "values": ["button", "link", "none"],
      "default": "none",
      "required": false,
      "description": "Tipo de a√ß√£o no footer do popover"
    },
    {
      "name": "action-label",
      "type": "string",
      "default": "Button",
      "required": false,
      "description": "Label da a√ß√£o (button ou link)"
    },
    {
      "name": "action-href",
      "type": "string",
      "default": "#",
      "required": false,
      "description": "URL do link (quando action-type='link')"
    },
    {
      "name": "closable",
      "type": "boolean",
      "default": true,
      "required": false,
      "description": "Define se o popover pode ser fechado via bot√£o X"
    },
    {
      "name": "open",
      "type": "boolean",
      "default": false,
      "required": false,
      "description": "Estado de visibilidade do popover"
    },
    {
      "name": "max-width",
      "type": "string",
      "default": "278px",
      "required": false,
      "description": "Largura m√°xima do popover"
    }
  ],
  "events": [
    {
      "name": "atlas-popover-close",
      "description": "Disparado quando o popover √© fechado via bot√£o X ou programaticamente",
      "detail": "{ reason: 'close-button' | 'programmatic' }"
    },
    {
      "name": "atlas-popover-action",
      "description": "Disparado quando a a√ß√£o (button/link) √© clicada",
      "detail": "{ actionType: 'button' | 'link', label: string }"
    }
  ],
  "states": [
    {
      "name": "default",
      "description": "Estado padr√£o do popover quando vis√≠vel",
      "tokens": {
        "background-color": "var(--atlas-color-surface-static-container-neutral-ultra-soft)",
        "border-color": "var(--atlas-color-border-default)",
        "border-width": "var(--atlas-stroke-weight-100)",
        "border-radius": "var(--atlas-radius-composite-lg)",
        "box-shadow": "0px var(--atlas-spacing-100) var(--atlas-blur-200) 0px var(--atlas-color-opacity-black-200)",
        "padding": "var(--atlas-padding-md)",
        "gap": "var(--atlas-spacing-100)"
      }
    }
  ],
  "layout": {
    "padding": "var(--atlas-padding-md) ‚Üí var(--atlas-spacing-200) ‚Üí 16px ‚úÖ",
    "gap": "var(--atlas-spacing-100) ‚Üí 8px ‚úÖ (N√ÉO usar --atlas-gap-sm que √© 12px)",
    "border-radius": "var(--atlas-radius-composite-lg) ‚Üí var(--atlas-radius-200) ‚Üí 16px ‚úÖ",
    "border-width": "var(--atlas-stroke-weight-100) ‚Üí 1px ‚úÖ",
    "max-width": "278px (extra√≠do do Figma)",
    "min-width": "278px (Desktop)",
    "mobile-min-width": "328px (Mobile/App)",
    "box-shadow": "0px 8px 16px 0px rgba(29,33,37,0.16)"
  },
  "typography": {
    "title": {
      "font-family": "Open Sans",
      "font-size": "var(--atlas-typescale-heading-6-size)",
      "font-weight": "var(--atlas-typescale-heading-6-weight)",
      "letter-spacing": "var(--atlas-typescale-heading-6-letter-spacing)",
      "line-height": "1.2",
      "color": "var(--atlas-color-text-static-neutral-hard)",
      "reference": ".Old/Heading/H6 do Figma ‚Üí Migrado para --atlas-typescale-heading-6",
      "computed-values": "16px, 600 (SemiBold), letter-spacing: 0"
    },
    "text": {
      "font-family": "Open Sans",
      "font-size": "var(--atlas-typescale-body-sm-size)",
      "font-weight": "var(--atlas-typescale-body-sm-weight-default)",
      "letter-spacing": "var(--atlas-typescale-body-sm-letter-spacing)",
      "line-height": "1.5",
      "color": "var(--atlas-color-text-static-neutral-hard)",
      "reference": ".Old/Small/Regular do Figma ‚Üí Migrado para --atlas-typescale-body-sm",
      "computed-values": "14px, 400 (Regular), letter-spacing: 0"
    }
  },
  "arrow": {
    "description": "Seta visual que aponta para o elemento acionador",
    "implementation": "CSS puro usando ::before e ::after com border-triangle technique",
    "size": {
      "width": "12px (6px por lado)",
      "height": "6px (ajustado para melhor alinhamento)",
      "border-width": "1px (visualmente consistente com --atlas-stroke-weight-100)",
      "technique": "::before cria tri√¢ngulo externo 6px, ::after cria tri√¢ngulo interno 5px para simular borda de 1px"
    },
    "positions": {
      "top-center": "Centralizada no topo (top: -5px, left: 50%, transform: translateX(-50%))",
      "top-left": "√Ä esquerda no topo (top: -5px, left: 20px)",
      "top-right": "√Ä direita no topo (top: -5px, right: 20px)",
      "bottom-center": "Centralizada na base (bottom: -5px, left: 50%, transform: translateX(-50%))",
      "bottom-left": "√Ä esquerda na base (bottom: -5px, left: 20px)",
      "bottom-right": "√Ä direita na base (bottom: -5px, right: 20px)",
      "side-left": "Lateral esquerda (left: -5px, top: 50%, transform: translateY(-50%))",
      "side-right": "Lateral direita (right: -5px, top: 50%, transform: translateY(-50%))",
      "none": "Sem seta (::before/::after n√£o renderizados)"
    },
    "colors": {
      "fill": "var(--atlas-color-surface-static-container-neutral-ultra-soft)",
      "border": "var(--atlas-color-border-default)"
    },
    "technique": "::before cria borda da seta, ::after cria preenchimento interno",
    "performance": "Zero requests HTTP, zero processamento SVG, CSS puro"
  },
  "header": {
    "description": "Bloco que agrupa t√≠tulo + bot√£o fechar no topo",
    "display": "flex (align-items: flex-start, justify-content: space-between)",
    "gap": "var(--atlas-spacing-100) [8px]",
    "hidden-when": "Quando n√£o h√° t√≠tulo E n√£o √© closable"
  },
  "close-button": {
    "component": "atlas-icon-button",
    "description": "Composi√ß√£o do componente atlas-icon-button dentro do header",
    "default-props": {
      "icon-name": "x",
      "color": "secondary",
      "size": "sm"
    },
    "dimensions": "24x24px (size='sm' do atlas-icon-button)",
    "icon-size": "16x16px",
    "position": "flex-shrink: 0 (dentro do header, lado a lado com o t√≠tulo)"
  },
  "image": {
    "description": "Imagem opcional exibida abaixo do header, antes do texto",
    "order": "1. Header (t√≠tulo + bot√£o) ‚Üí 2. Imagem ‚Üí 3. Content (texto) ‚Üí 4. Footer",
    "display": "block",
    "width": "calc(100% + padding-md * 2) - sangra nas bordas laterais",
    "border-radius": "0 (sem border-radius, conforme Figma)",
    "aspect-ratio": "Livre, definido pela imagem",
    "max-height": "146px (extra√≠do do Figma)",
    "object-fit": "cover"
  },
  "footer-actions": {
    "button": {
      "component": "atlas-button",
      "default-props": {
        "type": "filled",
        "color": "primary",
        "size": "sm",
        "label": "Button"
      }
    },
    "link": {
      "component": "atlas-link-button",
      "default-props": {
        "size": "sm",
        "label": "Link"
      }
    },
    "none": {
      "description": "Sem a√ß√£o no footer"
    }
  },
  "variations": [
    {
      "description": "Desktop - Com t√≠tulo, texto e bot√£o",
      "count": "48 combina√ß√µes (6 arrow positions √ó 2 title √ó 2 image √ó 2 action)"
    },
    {
      "description": "Mobile/App - Sem arrow, varia√ß√µes de conte√∫do",
      "count": "9 combina√ß√µes (3 action types √ó 3 content variations)"
    }
  ],
  "dependencies": [
    "atlas-design-tokens.css (tokens de cor, espa√ßamento, borda)",
    "atlas-button (quando action-type='button')",
    "atlas-link-button (quando action-type='link')",
    "atlas-icon-button (para o close button quando closable=true)"
  ],
  "figma": {
    "file": "https://www.figma.com/design/EpnFuPVWcjDYwkV2o2Vx3I/Atlas---UI-Kit",
    "component": "Popover",
    "node-id": "295-5934",
    "inspected": "2026-02-12",
    "variations-inspected": [
      "295:5935 - Desktop, Arrow=Top-center, Action=Button, Title=True, Image=False",
      "295:5995 - Desktop, Arrow=Top-center, Action=Button, Title=True, Image=True",
      "295:6370 - Desktop, Arrow=Top-center, Action=None, Title=False, Image=False"
    ]
  },
  "tokens-mapping": {
    "atlas-design-tokens.css": {
      "background": "--atlas-color-surface-static-container-neutral-ultra-soft (mapeado para #FFFFFF no Figma)",
      "border-color": "--atlas-color-border-default (#D1D6DC - diferen√ßa de 1.5% do Figma #ced4da √© impercept√≠vel)",
      "border-width": "--atlas-stroke-weight-100 (1px)",
      "border-radius": "--atlas-radius-composite-lg (16px, precisa validar se existe no tokens)",
      "padding": "--atlas-padding-md (16px)",
      "gap": "--atlas-spacing-100 (8px)",
      "shadow-offset-y": "--atlas-spacing-100 (8px)",
      "shadow-blur": "--atlas-blur-200 (16px)",
      "shadow-color": "--atlas-color-opacity-black-200 (rgba(29,33,37,0.16))",
      "text-color": "--atlas-color-text-static-neutral-hard",
      "icon-color": "--atlas-color-icon-static-neutral-medium",
      "close-button-padding": "--atlas-padding-2xs (4px)",
      "close-button-radius": "--atlas-radius-composite-full (9999px)"
    }
  },
  "notes": [
    "‚úÖ RESOLVIDO: Todos os tokens do Figma foram mapeados com sucesso para tokens existentes do Atlas",
    "‚úÖ Mapeamento de Tokens Figma ‚Üí Atlas:",
    "  - atlas/components/popover/background/color ‚Üí --atlas-color-surface-static-container-neutral-ultra-soft ‚úÖ",
    "  - atlas/components/popover/stroke/color ‚Üí --atlas-color-border-default ‚úÖ",
    "  - atlas/components/popover/border/radius ‚Üí --atlas-radius-composite-lg (16px) ‚úÖ",
    "  - atlas/components/popover/spacing/padding/md ‚Üí --atlas-padding-md (16px) ‚úÖ",
    "  - atlas/components/popover/spacing/gap/sm ‚Üí --atlas-spacing-100 (8px) ‚úÖ",
    "‚úÖ Tipografia migrada: .Old/Heading/H6 ‚Üí --atlas-typescale-heading-6 | .Old/Small/Regular ‚Üí --atlas-typescale-body-sm",
    "‚úÖ Seta implementada com CSS puro (::before/::after) - zero depend√™ncias externas",
    "‚úÖ Cor da borda: Diferen√ßa de 1.5% entre Figma (#ced4da) e token (#D1D6DC) √© impercept√≠vel visualmente",
    "üêõ CORRIGIDO: Tamanho dos bot√µes/links mudado de 'small' para 'sm' (padr√£o do Atlas Design System)",
    "üêõ CORRIGIDO: Close button agora usa atlas-icon-button em vez de implementa√ß√£o manual (composi√ß√£o correta)",
    "üêõ CORRIGIDO: Layout reorganizado conforme Figma - Header (t√≠tulo + bot√£o) ‚Üí Imagem ‚Üí Content (texto) ‚Üí Footer",
    "üêõ CORRIGIDO: Imagem sem border-radius (border-radius: 0) conforme Figma",
    "üêõ CORRIGIDO: Posicionamento da seta ajustado (offset: -5px fixo, left/right: 20px) - colada no container",
    "üì± Mobile/App: largura m√≠nima 328px (vs 278px no Desktop), sem arrow",
    "üì¶ O componente comp√µe atlas-button, atlas-link-button e atlas-icon-button dinamicamente",
    "üîí Close button dispara evento customizado 'atlas-popover-close'",
    "‚ö° Posicionamento do popover √© responsabilidade do consumidor (via CSS/JS positioning library)",
    "‚ôø Acessibilidade: role=dialog, aria-labelledby, aria-describedby, esc-key handler, focus trap quando a√ß√µes presentes"
  ],
  "accessibility": {
    "role": "dialog ou tooltip (definir baseado no uso)",
    "aria-labelledby": "ID do t√≠tulo (se presente)",
    "aria-describedby": "ID do texto",
    "focus-trap": "Implementar quando action-type='button' ou 'link'",
    "esc-key": "Deve fechar o popover",
    "close-button-label": "aria-label='Fechar' no bot√£o X"
  },
  "validations-completed": [
    "‚úÖ VALIDADO: --atlas-radius-composite-lg existe (16px)",
    "‚úÖ VALIDADO: --atlas-spacing-100 (8px) para gap interno",
    "‚úÖ VALIDADO: background-color mapeado para --atlas-color-surface-static-container-neutral-ultra-soft",
    "‚úÖ DECIDIDO: Seta implementada com CSS puro (::before/::after) - border-triangle technique",
    "‚úÖ DECIDIDO: Cor da borda usa --atlas-color-border-default (diferen√ßa < 2% √© impercept√≠vel)",
    "‚úÖ DECIDIDO: Tipografia migrada para tokens modernos (heading-6 e body-sm)",
    "‚úÖ CORRIGIDO: Seta usa border-size reduzido (5px interno vs 6px externo) para criar borda visual de 1px consistente com container",
    "‚úÖ APROVADO: Componente pronto para implementa√ß√£o - ver DECISOES-TECNICAS.md"
  ]
}
